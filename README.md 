Lemuen Shell v0.4

Lemuen ‡∏Ñ‡∏∑‡∏≠ Shell ‡∏Ç‡∏ô‡∏≤‡∏î‡πÄ‡∏•‡πá‡∏Å‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏†‡∏≤‡∏©‡∏≤ C ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á Unix shell ‡∏à‡∏£‡∏¥‡∏á‡πÜ ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö features ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡πÄ‡∏ä‡πà‡∏ô pipeline, redirection, built-in commands, readline ‡πÅ‡∏•‡∏∞ signal handling

üéØ ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏´‡∏•‡∏±‡∏Å

    ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á Unix ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ‡πÑ‡∏î‡πâ ‡πÄ‡∏ä‡πà‡∏ô ls, pwd, cat

    ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö redirection (<, >, >>)

    ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö pipeline ‡∏î‡πâ‡∏ß‡∏¢ |

    built-in commands: cd, exit

    ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô readline: ‚Üë‚Üì history, Ctrl+R ‡∏Ñ‡πâ‡∏ô‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á, Tab autocomplete

    ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö signal Ctrl+C

    ‡πÅ‡∏¢‡∏Å‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÅ‡∏ö‡∏ö flexible ‡∏î‡πâ‡∏ß‡∏¢ parser ‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á

üÜï ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ô Lemuen v0.4

‚úÖ ‡πÉ‡∏ä‡πâ libreadline (‡∏ú‡πà‡∏≤‡∏ô ‚Üë, ‚Üì, Ctrl+R, Tab ‡πÑ‡∏î‡πâ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô bash)
‚úÖ ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ñ‡∏π‡∏Å‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡πà‡∏≤‡∏ô execvp + pipe ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢
‚úÖ ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á ‡πÄ‡∏ä‡πà‡∏ô ls | grep txt > result.txt
‚úÖ ‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì Ctrl+C ‡∏à‡∏∞‡∏´‡∏¢‡∏∏‡∏î‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ

üì¶ ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå

lemuen/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ main.c ‚Üí Entry point
‚îÇ   ‚îú‚îÄ‚îÄ parser.c / parser.h ‚Üí ‡πÅ‡∏¢‡∏Å‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á, arguments, redirection
‚îÇ   ‚îú‚îÄ‚îÄ executor.c / executor.h ‚Üí ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ fork, pipe, execvp
‚îÇ   ‚îú‚îÄ‚îÄ builtins.c / builtins.h ‚Üí ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö cd, exit
‚îÇ   ‚îú‚îÄ‚îÄ utils.c / utils.h ‚Üí ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ä‡πà‡∏ß‡∏¢ ‡πÄ‡∏ä‡πà‡∏ô trim, strdup ‡∏Ø‡∏•‡∏Ø
‚îú‚îÄ‚îÄ include/ ‚Üí ‡πÄ‡∏Å‡πá‡∏ö header ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ô
‚îú‚îÄ‚îÄ Makefile ‚Üí ‡∏Ñ‡∏≠‡∏°‡πÑ‡∏û‡∏•‡πå shell ‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢‡πÜ
‚îî‚îÄ‚îÄ README.md ‚Üê ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏µ‡πâ

üíª ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á libreadline ‡∏Å‡πà‡∏≠‡∏ô (‡∏ö‡∏ô Arch Linux):

sudo pacman -S readline

‡∏Ñ‡∏≠‡∏°‡πÑ‡∏û‡∏•‡πå:

make

‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ‡∏ï‡∏£‡∏á‡πÜ:

gcc -o lemuen ./src/main.c -lreadline -lncurses

‡∏£‡∏±‡∏ô:

./lemuen

üîß ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ:

    ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ:

    lemuen> ls
    lemuen> echo Hello

    redirection:

    lemuen> echo test > out.txt
    lemuen> cat < out.txt

    pipe:

    lemuen> ls | grep .c

    built-in:

    lemuen> cd /tmp
    lemuen> exit

    readline:

    ‚Üë ‚Üì ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á
    Ctrl+R ‡∏Ñ‡πâ‡∏ô‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á
    Tab ‡πÄ‡∏ï‡∏¥‡∏°‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

üìå ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏

    Shell ‡∏ô‡∏µ‡πâ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö &&, ||, ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£, glob (*, ?) (‡πÅ‡∏ï‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏∞‡∏°‡∏≤‡πÄ‡∏£‡πá‡∏ß‡πÜ ‡∏ô‡∏µ‡πâ!)

    ‡πÉ‡∏ä‡πâ signal(SIGINT, ...) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Ctrl+C

    ‡πÉ‡∏ä‡πâ dup2/open/close ‡πÅ‡∏ó‡∏ô freopen/fprintf ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á‡∏Å‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏£‡∏¥‡∏á